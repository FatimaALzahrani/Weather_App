# تطبيق الطقس

## المحتويات 
  * [مقدمة](#مقدمة)
  * [ديمو للتطبيق](#ديمو)
  * [الأدوات والمكاتب المستخدمة](#الأدوات+المكتبات)
  * [شرح معنى ال API](#API)
  * [شرح ال API المستخدم "weatherapi"](#weatherapi)
  * [شرح بعض الدوال المستخدمة](#الدوال)
    
<hr/>
    
## مقدمة
### يعرض التطبيق الطقس بناءً على اسم مدينة المستخدم وذلك باستخدم weatherapi الذي سيتم شرح طريقة استخدامه لاحقًا , حيث يعرض الطقس الحالي ومن ثم بالاسفل سيعرض توقعاات الطقس لكل اليوم 
### يتكون التطبيق من خطوتين : 
  #### 1 - تحديد الطقس بناءً على الموقع
   ##### في هذه الحاله سيقوم التطبيق بالوصول إلى موقعك وبعد السماح له بذلك سيقوم بتحديد احداثيات موقعك واستخدام خطوط الطول والعرض لتحديد اسم مدينتك ورُربما لا ينجح ذلك مع كل المدن مثل الباحة ومن ثم يقوم بجلب الطقس لها
  #### 2 - تحديد الطقس بناءً على اسم المدينة
   ##### أما في هذه الحاله فسيقوم المستخدم بإدخال اسم مدينته ومن ثم سيعرض له التطبيق نتيجة الطقس

<hr/>

## ديمو

https://github.com/FatimaALzahrani/Weather_App/assets/107775566/bd5f7617-56a2-45bd-9784-66a7d2223448

<hr/>


## الأدوات+المكتبات

### 1- appcompat : هذه المكتبة توفر دعمًا لإصدارات Android السابقة، بحيث يمكنك استخدام ميزات النظام الحديثة حتى على أجهزة قديمة. تساعد في توحيد تجربة المستخدم وجعل التطبيق يعمل بشكل جيد على مختلف الأجهزة والإصدارات.

     implementation 'androidx.appcompat:appcompat:1.6.1'

### 2- Material Design : توفر واجهات مستخدم جميلة جاهزه , وهنا استخدمناها مع TextInputEditText و TextInputLayout

     implementation 'com.google.android.material:material:1.9.0'
     
### 3- constraintlayout : توفر مكتبة تخطيط قوي يسمح بتصميم شاشات متنوعة ومرنة. يمكنك استخدام ConstraintLayout لوضع العناصر بشكل دقيق والتحكم في العلاقات بينها بطريقة بصرية وبسيطة.
 
     implementation 'androidx.constraintlayout:constraintlayout:2.1.4'

### 4- volley : مكتبة شهيرة لإدارة طلبات الشبكة. تساعد في إرسال طلبات HTTP إلى الخوادم واستقبال البيانات بطريقة سهلة وفعالة. وهنا استخدمناها لإرسال طلب لخادم weatherapi واستقبال الناتج كملف json

     implementation 'com.android.volley:volley:1.2.1'

### 5- picasso : تُستخدم لتحميل وعرض الصورة بسهولة . تقوم بإدارة تحميل الصور من الإنترنت "الروابط" وتعرضها في واجهة المستخدم بشكل سلس وفعال. وممكن استخدام Gradle لتأديه نفس الغرض

     implementation 'com.squareup.picasso:picasso:2.71828'

### 6- play-services-location : توفر مكتبة تخطيط قوي يسمح بتصميم شاشات متنوعة ومرنة. يمكنك استخدام ConstraintLayout لوضع العناصر بشكل دقيق والتحكم في العلاقات بينها بطريقة بصرية وبسيطة.
     
     implementation 'com.google.android.gms:play-services-location:21.0.1'

<hr/>

## API

### API دورها هو استقبال الطلبات Requests من Client ومن ثم يتم العمل عليها في داخل الخادم الخاص بالمشروع Server. مثلاً، في حالة مشروعنا هذا حق الطقس، إذا أدخلت مدينتك وقمت بالضغط على ايقونه البحث فهنا أنشأت طلب جديد Request لعرض جميع المعلومات الخاصة بالطقس للمدينة المحددة. تقوم API بأخذ هذا الطلب وإعطاءه إلى الخادم Server ليتم العمل عليه، يقوم الخادم بجلب البيانات من قاعدة البيانات وعندما تجهز هذه المعلومات يتم إرجاعها إلى Client على شكل Response.

### وهنا صورة توضيحيه

![API](https://github.com/FatimaALzahrani/Weather_App/assets/107775566/89f6f58a-d46b-44ae-86d7-937c1e1d6c6a)

<hr/>

## weatherapi
### أ. في البداية عشان تربط مع API , لازم يكون عندك API key خاص فيك , طيب كيف أحصل عليه ؟
#### 1- بنروح على الموقع من هذا الرابط : https://www.weatherapi.com/
#### 2- اذا ما كان عندك حساب تسوي حساب جديد وتأكد البريد بانك تسجل دخول من ايميلك , ولو عندك حساب على طول تسجيل دخول
#### 3- بيطلع ال API key حقك على طول اول ما تدخل تنسخه وتستخدمه في مشروعك

### ب. طيب ايش الخدمات اللي يوفرها هذا ال API , وكيف اجربهم قبل استخدمهم بالمشروع ؟
#### 1- من القائمة اللي في اليسار تختار API Explorer 
#### 2- بيطلع لك معلومات تعبيها عبيها , هذا معناهم : 
   ##### * Your API Key : وتعني ال API key الخاص فيك واللي توك نسخته
   ##### * Protocol : تبغا باي بروتوكول HTTP , HTTPS
   ##### * Format : تبغا يرجع لك الاستجابه على شكل ملف JSON ولا XML
   ##### * q : هنا اسم المدينه اللي تبغا تجيب الطقس لها
#### 3- بعد كذا بتختار ايش الخدمه اللي تحتاجها بمشروعك ؟ وهذا معنى كل خدمه باختصار : 
   ##### * Current (الحالي): تعيد بيانات حالة الطقس الحالية للموقع المحدد، مثل درجة الحرارة الحالية، سرعة الرياح، الرطوبة، وأحوال الطقس (مشمس، غائم، مطر)
   ##### * Forecast (التوقعات):تُعيد توقعات الطقس المستقبلية للموقع المحدد على فترات زمنية محددة (مثل الساعات القادمة أو الأيام القادمة)، تتضمن درجات الحرارة واحتمالات الهطول وحالات الطقس المتوقعة , وهذا اللي استخدمته بهذا المشروع
   ##### * Search/Autocomplete (البحث/إكمال التلقائي): تسمح للمستخدم بإدخال مكان أو موقع معين واسترداد النتائج المتعلقة بتلك المنطقة، مما يمكنهم من العثور على تفاصيل الطقس والتوقعات لمواقع مختلفة
   ##### * History (التاريخ): توفر معلومات حول سجلات الطقس السابقة لموقع محدد في تواريخ سابقة، مما يسمح للمستخدم بالوصول إلى بيانات طقس الأيام اللي قبل
   ##### * Future (المستقبل): تقدم توقعات طقس بعيدة المدى لموقع محدد، على فترات زمنية أطول مما يمكن الحصول عليها من وحدة التوقعات
   ##### * Astronomy (الفلكية): تعيد معلومات حول الأحداث الفلكية للموقع المحدد، مثل وقت شروق الشمس وغروبها وأوقات القمر 
   ##### * Time Zone (المنطقة الزمنية):تعيد المنطقة الزمنية للموقع المحدد، وهذا يمكن أن يساعد في التحكم في الوقت الصحيح المرتبط بالموقع
   ##### * Sports (الرياضة): تُعيد بيانات حول معلومات الطقس والظروف المناخية المتوقعة للمواقع التي تستضيف أحداث رياضية معينة، مما يساعد المشجعين والمنظمين على التخطيط واتخاذ القرارات المناسبة

#### 4- نضغط على Show Response , وبيظهر لنا كم شي , وهذي معانيهم :
   ##### * ***Call*** : وبيكون فيه الرابط اللي بنستخدمه في الكود حقنا مع استبدال قيمة q بالمدينة المدخله
   ##### * ***Response Code*** : بيكون عباره عن رقم وفايدته بيوفر لنا معلومات حول ما إذا كان الطلب قد تم معالجته بنجاح وما هو حالة الاستجابة , بعض الامثله على أشهر الارقام اللي بترجع ومعناها /
     - 200 OK: الطلب تم معالجته بنجاح والاستجابة تحتوي على البيانات المطلوبة , هذا اللي نبغاه يطلع لنا
     - 201 Created: تم إنشاء المورد بنجاح عند إجراء طلب إنشاء (POST) بنجاح
     - 400 Bad Request: الطلب غير صالح بناءً على بنية الطلب أو المحتوى
     - 401 Unauthorized: الطلب يتطلب مصادقة (Authentication) غير صحيحة أو غير موجودة
     - 404 Not Found: المورد المطلوب غير موجود على الخادم
     
   ##### * ***Response Headers*** : ومات إضافية تُرسل من الخادم إلى العميل كجزء من استجابة الطلب. تحتوي هذه المعلومات على بيانات متعلقة بالاستجابة نفسها والخادم الذي أرسل الاستجابة , وهذي أمثله لبعض الاشياء الموجودة فيه ومعناها /
     - Content-Type: يُحدد نوع المحتوى الموجود في جسم الاستجابة، مثل "application/json" لـ JSON أو "text/html" لصفحات الويب
     - Content-Length: يُحدد طول جسم الاستجابة في بايت، مما يساعد العميل على حساب حجم الاستجابة
     - Cache-Control: يُحدد كيفية التحكم في ذاكرة التخزين المؤقت للاستجابة في العميل أو الخادم، مما يؤثر على عمليات التخزين المؤقت للمتصفح
     - Date: يُحدد تاريخ إرسال الاستجابة من الخادم
     - Server: يُحدد نوع خادم الويب الذي أرسل الاستجابة
   ##### * ***Response Body*** : هو المحتوى الذي يتم إرجاعه من الخادم كجزء من الاستجابة بعد معالجة الطلب من قِبَل الخادم. يحمل بيانات محددة يريد الشخص الحصول عليها كنتيجة لطلبه من الـ API , والأشياء اللي استخدمناها هنا / درجة الحرارة بالسيليوز والوقت وايقونه تمثل الطقس ...
   
<hr/>

## الدوال
### أ- MainActivity

#### 1. `onCreate`: دالة تُنفّذ عند إنشاء النشاط (Activity) وتقوم بتهيئة وربط المتغيرات مع عناصر واجهة المستخدم وتقوم بالحصول على موقع المستخدم واستخراج اسم المدينة وجلب معلومات الطقس باستخدام الـ API.
#### 2. `onRequestPermissionsResult`: دالة تتعامل مع نتائج طلبات الأذونات. في هذا النموذج، تستخدم للتحقق من الحصول على أذونات موقع المستخدم.
#### 3. `getCityName`: دالة تُعيد اسم المدينة استنادًا إلى الإحداثيات الجغرافية (خط الطول وخط العرض) باستخدام `Geocoder`.
#### 4. `getWeatherInfo`: دالة لجلب معلومات الطقس من الـ API. تُنفّذ طلبًا GET لاستدعاء بيانات الطقس للمدينة المُحددة.
#### 5. `jsonObjectRequest`: طلب استدعاء للحصول على بيانات الطقس من الـ API. يُحدث الطلب بناءً على اسم المدينة، وعند الاستجابة بنجاح، يُحلل الـ JSON المسترجع ويُعرض في واجهة المستخدم. إذا حدث خطأ في الاستجابة، يتم عرض رسالة تنبيه.

### ب- WeatherAdapter
  #### فائدة WeatherAdapter هو ربط مصفوفة (ArrayList) من البيانات المتعلقة بالطقس (مثل الوقت، درجة الحرارة، الرمز) بعناصر الـ RecyclerView.
  #### يعرض البيانات بشكل مكرر في عناصر القائمة (Items) داخل الـ RecyclerView.
  #### يسهل عرض البيانات المتعلقة بالطقس في الواجهة بشكل منظم ومناسب، حيث يقوم بإنشاء وعرض أنماط مخصصة لكل عنصر في الـ RecyclerView.
  
### ج- WeatherModel
  #### فائدة WeatherModel هو تمثيل بيانات الطقس الخاصة بكل عنصر في الـ RecyclerView.
  #### يسهل تنظيم وتخزين معلومات الطقس المختلفة في كائن واحد.
  #### يُستخدم كنموذج لتخزين البيانات المسترجعة من API بشكل منظم وسهل الاستخدام.

